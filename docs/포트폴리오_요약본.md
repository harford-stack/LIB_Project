# 📚 스터디 카페 좌석 예약 시스템 - 포트폴리오 요약본

> **"사용자를 위한, 사용자에 의한, 사용자의 예약 시스템"**

---

## 🎯 프로젝트 개요

**프로젝트명**: PageStudy (스터디 카페 좌석 예약 시스템)  
**개발 기간**: 2025.09.12 ~ 2025.09.19 (8일)  
**개발 인원**: 1명  
**프로젝트 유형**: 개인 프로젝트

---

## 💡 프로젝트 목표

스터디카페의 좌석 예약 기능을 모바일 전용 화면으로 구현하여, 사용자 편의성을 최우선으로 고려한 예약 시스템을 개발하는 것이 목표였습니다.

### 핵심 목표

- 모바일 전용 화면의 직관적인 UI/UX
- 사용자 편의성을 최우선으로 고려한 기능 구현
- 안전하고 효율적인 예약 시스템 구축

---

## 🛠 기술 스택

### Frontend

- **Vue.js 3.x** - 프론트엔드 프레임워크
- **jQuery 3.7.1** - AJAX 통신 및 DOM 조작
- **CSS** - 모바일 전용 반응형 디자인

### Backend

- **Node.js** - 서버 런타임
- **Express 5.1.0** - 웹 프레임워크
- **Oracle Database (oracledb 6.9.0)** - 관계형 데이터베이스
- **JWT** - 토큰 기반 인증
- **argon2** - 비밀번호 해싱
- **OAuth 2.0** - 소셜 로그인 (카카오, 네이버, 구글)

### 개발 도구

- **Swagger** - API 문서화
- **Git** - 버전 관리

---

## ✨ 주요 기능

### 1. 사용자 인증 시스템

- **일반 로그인/회원가입**
  - 아이디, 비밀번호 기반 인증
  - JWT 토큰 기반 세션 관리
  - 비밀번호 해싱 (argon2)
- **소셜 로그인**

  - 카카오, 네이버, 구글 로그인 지원
  - OAuth 2.0 인증 플로우
  - 기존 회원가입 사용자와 자동 연결

- **계정 관리**
  - 아이디 찾기 (이름, 이메일)
  - 비밀번호 재설정 (임시 비밀번호 발급)
  - 사용자 정보 수정
  - 회원 탈퇴

### 2. 좌석 예약 시스템

- **좌석 조회**

  - 좌석 유형별 조회
  - 날짜/시간대별 예약 가능 좌석 조회
  - 실시간 예약 상태 표시

- **좌석 예약**

  - 날짜 선택 (달력)
  - 시간 선택 (시작/종료 시간)
  - 좌석 선택 (1인석, 그룹실)
  - 예약 정보 요약 및 확인
  - 1인 1예약 원칙 적용

- **예약 관리**
  - 예약 내역 조회 (전체/확정/취소)
  - 예약 취소 (종료 전까지)
  - 활성 예약 확인

### 3. 보안 기능

- **비밀번호 보안**

  - argon2 해싱 알고리즘 사용
  - 평문 비밀번호 저장 금지

- **인증 보안**

  - JWT 토큰 기반 인증
  - 토큰 만료 시간 설정 (7일)
  - 권한 확인 (본인 정보만 수정 가능)

- **입력 검증**
  - 이메일 형식 검증
  - 전화번호 형식 검증
  - SQL 인젝션 방지

### 4. 사용자 경험 (UX)

- **모바일 최적화**

  - 모바일 전용 화면 디자인
  - 터치 환경 고려한 UI
  - 직관적인 메뉴 구조

- **에러 처리**
  - 명확한 에러 메시지
  - 인라인 에러 표시
  - 사용자 친화적인 안내

---

## 📊 프로젝트 성과

### 구현 완료 기능

- ✅ 사용자 인증 (일반 로그인, 소셜 로그인)
- ✅ 회원가입 및 사용자 정보 관리
- ✅ 좌석 조회 및 예약
- ✅ 예약 내역 조회 및 취소
- ✅ 1인 1예약 체크
- ✅ 보안 기능 (JWT, 비밀번호 해싱)
- ✅ 에러 처리
- ✅ API 문서화 (Swagger)

### 기술적 성과

- **API 엔드포인트**: 약 20개
- **프론트엔드 페이지**: 약 10개
- **코드 라인 수**: 약 5,000줄
- **문서**: 약 10개

---

## 🎨 UI/UX 특징

### 모바일 전용 디자인

- 직관적인 메뉴 구조
- 터치 환경 고려한 버튼 크기
- 페이지별 통일된 디자인
- Header/Footer 고정

### 사용자 편의 기능

- 입력 영역 강조 효과
- 실시간 입력 검증
- 인라인 에러 메시지
- 예약 정보 요약 표시

---

## 🔒 보안 구현

### 비밀번호 보안

- argon2 해싱 알고리즘
- 평문 비밀번호 저장 금지
- 기존 비밀번호 마이그레이션

### 인증 보안

- JWT 토큰 기반 인증
- 토큰 만료 시간 관리
- 권한 확인 (본인 정보만 수정)

### 입력 검증

- 서버 사이드 검증
- 이메일/전화번호 형식 검증
- SQL 인젝션 방지

---

## 📝 주요 학습 내용

### 기술적 학습

1. **OAuth 2.0 인증 플로우**

   - Authorization Code Grant 방식
   - 카카오, 네이버, 구글 API 연동

2. **JWT 토큰 관리**

   - 토큰 생성 및 검증
   - 토큰 기반 세션 관리

3. **비밀번호 해싱**

   - argon2 알고리즘
   - 해싱 및 검증 과정

4. **데이터베이스 설계**
   - Oracle Database 사용
   - 테이블 관계 설계
   - JOIN 쿼리 활용

### 프로젝트 관리 학습

1. **단계별 개발 계획**

   - 일자별 목표 설정
   - 체계적인 개발 진행

2. **문서화의 중요성**

   - API 문서 작성
   - 개발일지 작성
   - 코드 주석 추가

3. **버그 수정 프로세스**
   - 문제 파악
   - 원인 분석
   - 해결 방법 도출

---

## 🔧 트러블 슈팅

### 1. 소셜 로그인 세션 캐시 문제

#### 1. 문제상황

소셜 로그인(카카오, 네이버, 구글) 구현 후, 한 번 로그인한 사용자가 다시 로그인 버튼을 클릭했을 때 로그인 화면이 표시되지 않고 이전 세션이 자동으로 인증되는 문제가 발생했습니다. 이로 인해 다른 계정으로 로그인하려는 사용자가 불편을 겪었고, 테스트 시에도 계정 전환이 어려웠습니다.

#### 2. 원인

OAuth 2.0 인증 플로우에서 소셜 로그인 제공자(카카오, 네이버, 구글)가 브라우저 세션을 캐시하여, 이미 로그인한 사용자의 경우 자동으로 기존 세션을 재사용하는 동작이 기본값으로 설정되어 있었습니다. 이는 OAuth 2.0 스펙의 정상적인 동작이지만, 사용자가 명시적으로 로그인 화면을 보고 싶어하거나 다른 계정으로 로그인하고 싶을 때는 문제가 됩니다.

#### 3. 개선결과

- 사용자가 소셜 로그인 버튼을 클릭할 때마다 항상 로그인 화면이 표시됨
- 다른 계정으로 로그인하는 것이 가능해짐
- 테스트 환경에서 계정 전환이 용이해짐
- 사용자 경험 개선 및 명시적인 인증 플로우 보장

#### 4. 해결방안

OAuth 2.0 인증 요청 URL에 `prompt=login` 파라미터를 추가하여 세션 캐시를 무시하고 항상 로그인 화면을 표시하도록 수정했습니다.

```javascript
// 수정 전
const kakaoAuthUrl = `https://kauth.kakao.com/oauth/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=code`;

// 수정 후
const kakaoAuthUrl = `https://kauth.kakao.com/oauth/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=code&prompt=login`;
```

카카오, 네이버, 구글 모두 동일한 방식으로 `prompt=login` 파라미터를 추가하여 일관된 사용자 경험을 제공했습니다.

---

### 2. Git Push Protection으로 인한 보안 이슈

#### 1. 문제상황

프로젝트를 GitHub에 푸시하려고 할 때 "push declined due to repository rule violations" 오류가 발생했습니다. GitHub Push Protection이 `.env` 파일에 포함된 Google OAuth Client ID와 Secret을 민감한 정보로 감지하여 푸시를 차단했습니다.

#### 2. 원인

`.env` 파일이 Git에 추적되고 있었고, 이 파일에는 OAuth 클라이언트 ID와 Secret 같은 민감한 정보가 포함되어 있었습니다. GitHub는 보안을 위해 이러한 민감한 정보가 포함된 파일의 푸시를 자동으로 차단하는 Push Protection 기능을 제공하고 있었습니다.

#### 3. 개선결과

- 민감한 정보가 Git 저장소에 포함되지 않도록 보안 강화
- `.env` 파일이 `.gitignore`에 올바르게 등록되어 향후 실수 방지
- Git 히스토리에서 민감한 정보 제거로 보안 취약점 해결
- 환경 변수 관리 베스트 프랙티스 적용

#### 4. 해결방안

1. **`.gitignore` 확인 및 수정**: `server/.env` 파일이 `.gitignore`에 포함되어 있는지 확인하고, 없으면 추가했습니다.

2. **Git 추적에서 제거**: 이미 Git에 추적되고 있던 `.env` 파일을 추적에서 제거했습니다.
   ```bash
   git rm --cached server/.env
   ```

3. **커밋 수정**: 마지막 커밋을 수정하여 `.env` 파일이 제거된 상태로 반영했습니다.
   ```bash
   git commit --amend --no-edit
   ```

4. **`.env.example` 파일 생성**: 다른 개발자나 배포 환경을 위한 템플릿 파일을 생성하여 필요한 환경 변수 구조를 문서화했습니다.

이를 통해 민감한 정보는 로컬 `.env` 파일에만 유지하고, Git 저장소에는 포함하지 않도록 보안을 강화했습니다.

---

## 🚀 향후 개선 사항

### 기능 개선

- 분 단위 예약 선택
- 예약 변경 기능
- 결제 시스템 연동
- 관리자 기능
- 알림 기능

### 기술 개선

- 프론트엔드 프레임워크 업그레이드 (Vue 3)
- 상태 관리 라이브러리 도입
- 테스트 코드 작성
- CI/CD 파이프라인 구축

---

## 💬 프로젝트 후기

### 좋았던 점

- 사용자 편의성을 고려한 기능 구현으로 더 많은 기능과 표현을 학습
- 모바일 전용 화면의 직관적이고 단순한 페이지 흐름이 백엔드 작업에 집중하기 좋았음
- 단계별 개발로 체계적인 진행이 가능했음
- 상세한 문서화로 프로젝트 관리가 용이했음

### 아쉬웠던 점

- 단일 지점이고 지점의 크기나 좌석 수, 회원 수가 많지 않았기에 데이터 다루는 부분을 깊게 활용하지 못함
- 너무 사용자만을 의식해서 구현하다보니 관리자 입장에서의 기능 구현을 못함
- 결제 시스템 미연동

---

## 📚 관련 문서

- [README.md](../README.md) - 프로젝트 소개 및 개요
- [API.md](./API.md) - API 엔드포인트 상세 설명
- [DAY1~DAY8 개발일지](./DAY1_개발일지.md) - 일자별 개발 과정

---

**작성일**: 2025년 9월 19일  
**프로젝트 완료**: ✅
